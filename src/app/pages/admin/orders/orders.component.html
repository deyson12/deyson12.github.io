<div class="card mb-8">

    <h4>Ã“rdenes ({{ orders.length }})</h4>

    <google-map height="500px" width="100%" [center]="center" [zoom]="12">
  <map-marker
    #m="mapMarker"
    *ngFor="let order of orders; trackBy: trackByOrderId"
    [position]="getLocation(order.order.location)"
    [label]="order.order.buyer?.name || ''"
    [title]="order.order.id"
    [options]="{ icon: getMarkerIcon(order) }"
    (mapClick)="onMarkerClick(order, m)">
  </map-marker>

  <map-info-window #infoWin>
    <div>
      <div class="font-bold">{{ selectedOrder?.order?.buyer?.name }}</div>
      <div>ID: {{ selectedOrder?.order?.id }}</div>
        <div>Total: {{ getTotal(selectedOrder?.order) | currency }}</div>
        <div>Estado: {{ selectedOrder?.order?.status }}</div>
        <div>Vendedor: {{ selectedOrder?.order?.seller?.name }}</div>
    </div>
  </map-info-window>
</google-map>

<div class="p-4">
    <p-table [value]="orders" [paginator]="true" [rows]="10" [responsiveLayout]="'scroll'">
        <ng-template pTemplate="header">
            <tr>
                <th>Color</th>
                <th>Id</th>
                <th>Location</th>
                <th>Vendedor</th>
                <th>Comprador</th>
                <th>Total</th>
                <th>Estado</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-order>
            <tr [ngStyle]="{ 'background-color': order.showMap ? '#f8d7da' : 'transparent' }">
                <td [style.backgroundColor]="order.color"></td>
                <td>{{ order.order.id }}</td>
                <td>{{ order.order.location | json }}</td>
                <td>{{ order.order.seller.name }}</td>
                <td>{{ order.order.buyer.name }}</td>
                <td>{{ getTotal(order.order) | currency }}</td>
                <td>{{ order.order.status }}</td>
            </tr>
        </ng-template>
    </p-table>
</div>

</div>